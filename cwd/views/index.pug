doctype html
html
  head
    title Citywide Dashboard

    style(type="text/css").
      body,
      * {
        padding: 0;
        margin: 0;
      }

      #map {
        height: 100vh;
        width: 100vw;
      }

      .draggable {
        cursor: move;
      }

      .glow-on-hover:hover {
        filter: url(#whiteGlow);
        cursor: pointer;
      }

      #tooltip {
        background: white;
        border-radius: 30px;
        padding: 15px;
        width: 350px;
        hyphens: auto;
        font-family: Biko;
      }

      #tooltip p{
        padding-top: 5px;
        line-height: 20px;
      }

      #tooltip span{
        float: right;
        display: inline-block;
        cursor: pointer;
        font-weight: bold;
      }

      @font-face {
        font-family: Biko;
        src: url('./images/fonts/Biko_Regular.otf') format('opentype');
      }
      @font-face {
        font-family: Biko;
        src: url('./images/fonts/Biko_Bold.otf') format('opentype');
        font-weight: bold;
      }

      .flowable-active path:last-of-type, .flowable-active line:last-of-type {
        animation-name: water;
        animation-duration: 5s;
        animation-timing-function: linear;
        animation-iteration-count: infinite;
        animation-direction: reverse;

        stroke-dasharray: 33 67;
        stroke-linecap: square;
      }

      .flowable-inactive path:last-of-type, .flowable-inactive line:last-of-type {
        display: none;
      }

      @keyframes water {
        to { stroke-dashoffset: 100 }
      }

  body
    div(id="page-wrap")
      div(id="dashboard-wrap")
        div(id="map")
          svg(id="svg-wrap" xmlns="http://www.w3.org/2000/svg")
            defs
              filter(id="blur" x="0" y="0")
                feGaussianBlur(in="SourceGraphic" stdDeviation="15")
              filter(id="whiteGlow" x="-50%" y="-50%" width="200%" height="200%" filterUnits="objectBoundingBox" overflow="auto")
                feMorphology(operator="dilate" radius="25" in="SourceAlpha" result="thicken")
                feGaussianBlur(in="thicken" stdDeviation="40" result="blurred")
                feFlood(flood-color="rgb(235,235,235)" result="glowColor")
                feComposite(in="glowColor" in2="blurred" operator="in" result="softGlow_colored")
                feMerge
                  feMergeNode(in="softGlow_colored")
                  feMergeNode(in="SourceGraphic")
            div(id="tooltip" display="none" style="position: absolute; display: none;")
              span(id="close" onclick="document.getElementById('tooltip').style.display='none'") X

    script const activeGlyphs = !{activeGlyphsStr};
    script(src="./dist/cwd-bundle.js")
    script(src="./app.js")